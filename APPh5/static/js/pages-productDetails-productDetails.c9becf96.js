(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-productDetails-productDetails"],{"37c3":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n.page[data-v-43545439]{background-color:#f8f8f8\n}\n.backBtn[data-v-43545439]{height:%?50?%;width:%?50?%;margin:%?10?% %?5?% %?0?% %?15?%;text-align:center\n}\n.backImage[data-v-43545439]{height:%?30?%;width:%?30?%;margin:%?0?% 0 %?20?% %?-15?%\n}\n.flex-topItem[data-v-43545439]{height:%?350?%;width:%?600?%;margin:%?-10?% %?0?% %?30?% %?75?%;text-align:center\n}\n.topImage[data-v-43545439]{height:%?350?%;width:%?600?%;border-radius:%?20?%\n}\n.productTitleView[data-v-43545439]{height:%?100?%;width:100%;border-top-style:outset;background-color:#fff\n}\n.productName[data-v-43545439]{margin-left:%?20?%\n}\n.productPic[data-v-43545439]{margin-left:%?20?%;color:#dd524d\n}\n.flex-optionItem[data-v-43545439]{height:%?330?%;background-color:#fff;margin-top:%?20?%\n}\n.segmentView[data-v-43545439]{margin-top:%?20?%;height:%?100?%;line-height:%?150?%;border-bottom:solid;border-width:%?1?%;border-color:#f4f5f6;text-align:center\n}\n.itemTitle[data-v-43545439]{margin-left:%?20?%;margin-top:%?16?%;color:#7a7e83\n}\n.segmentedItem[data-v-43545439]{margin-top:%?10?%;height:%?60?%\n}\n.numberBoxItem[data-v-43545439]{margin-left:%?400?%;height:%?65?%\n}\n.phoneInputItem[data-v-43545439]{margin-top:%?10?%;margin-left:%?30?%;height:%?60?%;border:1px solid #4cd964;border-radius:%?10?%\n}\n.flex-deitilItem[data-v-43545439]{margin-top:%?20?%;margin-bottom:%?120?%;background-color:#fff\n}\n.deitilTitle[data-v-43545439]{font-size:%?20?%;height:%?60?%;text-align:center;line-height:%?60?%;border-width:%?1?%;border-color:#f4f5f6;border-bottom-style:solid\n}\n.bottomView[data-v-43545439]{position:fixed;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;bottom:0;width:100%;height:%?120?%;background-color:#fff;border-width:%?1?%;border-color:#f4f5f6;border-top-style:solid\n}\n.totalAmountText[data-v-43545439]{margin:%?30?% 0 0 %?20?%;color:#dd524d;width:%?300?%;font-size:%?30?%\n}\n.toBuyBtn[data-v-43545439]{height:%?80?%;width:%?200?%;margin:%?20?% 0 0 %?200?%;text-align:center;font-size:%?30?%\n}",""])},"3b23":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-flex uni-column"},[n("v-uni-button",{staticClass:"backBtn",attrs:{type:"default",plain:"ture"},on:{click:function(e){e=t.$handleEvent(e),t.goback()}}},[n("v-uni-image",{staticClass:"backImage",attrs:{src:"../../static/backImage.png",mode:""}})],1),n("v-uni-view",{staticClass:"flex-topItem flex-item-V"},[n("v-uni-image",{staticClass:"topImage",attrs:{src:t.topUrl,mode:""}})],1),n("v-uni-view",{staticClass:"productTitleView uni-flex uni-column"},[n("v-uni-text",{staticClass:"productName"},[t._v(t._s(t.name))]),n("v-uni-text",{staticClass:"productPic"},[t._v("¥"+t._s(t.productionPic))])],1),n("v-uni-view",{staticClass:"flex-optionItem uni-flex uni-column"},[n("v-uni-view",{staticClass:"segmentView uni-flex uni-row"},[n("v-uni-view",{staticClass:"itemTitle"},[t._v("规格")]),n("uni-segmented-control",{staticClass:"segmentedItem",attrs:{current:t.current,values:t.priceItems,styleType:t.styleType,activeColor:t.activeColor},on:{clickItem:function(e){e=t.$handleEvent(e),t.onClickItem(e)}}})],1),n("v-uni-view",{staticClass:"segmentView uni-flex uni-row"},[n("v-uni-view",{staticClass:"itemTitle"},[t._v("数量")]),n("uni-number-box",{staticClass:"numberBoxItem",attrs:{min:1,max:99,value:t.productNumber},on:{change:function(e){e=t.$handleEvent(e),t.onNumberChange(e)}}})],1),n("v-uni-view",{staticClass:"segmentView uni-flex uni-row"},[n("v-uni-view",{staticClass:"itemTitle"},[t._v("手机号")]),n("v-uni-input",{staticClass:"phoneInputItem",attrs:{placeholder:"请输入手机号",value:t.inputPhoneNumber},on:{input:function(e){e=t.$handleEvent(e),t.KeyInput(e)}}})],1)],1),n("v-uni-view",{staticClass:"flex-deitilItem flex-item-V"},[n("v-uni-view",{staticClass:"deitilTitle"},[t._v("商品详情")]),n("v-uni-view",{staticClass:"uni-common-mt",staticStyle:{background:"#FFF",padding:"20upx"}},[n("v-uni-rich-text",{attrs:{nodes:t.text}})],1)],1),n("v-uni-view",{staticClass:"bottomView uni-flex uni-row"},[n("v-uni-view",{staticClass:"totalAmountText"},[t._v("合计:¥"+t._s(t.totalAmount)+"元")]),n("v-uni-button",{staticClass:"toBuyBtn",attrs:{type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.toBuyBtn()}}},[t._v("立即购买")])],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-numbox"},[n("v-uni-view",{staticClass:"uni-numbox-minus",class:{"uni-numbox-disabled":t.disableSubtract},on:{click:function(e){e=t.$handleEvent(e),t._calcValue("subtract")}}},[t._v("-")]),n("v-uni-input",{staticClass:"uni-numbox-value",attrs:{type:"number",disabled:t.disabled,value:t.inputValue},on:{blur:function(e){e=t.$handleEvent(e),t._onBlur(e)}}}),n("v-uni-view",{staticClass:"uni-numbox-plus",class:{"uni-numbox-disabled":t.disableAdd},on:{click:function(e){e=t.$handleEvent(e),t._calcValue("add")}}},[t._v("+")])],1)},a=[],s={name:"uni-number-box",props:{value:{type:Number,default:0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},computed:{disableSubtract:function(){return this.value<=this.min},disableAdd:function(){return this.value>=this.max}},watch:{value:function(t){this.inputValue=t},inputValue:function(t){this.$emit("change",t)}},methods:{_calcValue:function(t){var e=this._getDecimalScale(),n=this.inputValue*e,o=this.step*e;"subtract"===t?n-=o:"add"===t&&(n+=o),n<this.min||n>this.max||(this.inputValue=n/e)},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e?(e=+e,e>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e):this.inputValue=0}}},u=s,c=(n("fe1a"),n("2877")),l=Object(c["a"])(u,r,a,!1,null,"34c56738",null);l.options.__file="uni-number-box.vue";var d=l.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"segmented-control",class:t.styleType,style:t.wrapStyle},t._l(t.values,function(e,o){return n("v-uni-view",{key:o,staticClass:"segmented-control-item",class:t.styleType,style:o===t.currentIndex?t.activeStyle:t.itemStyle,on:{click:function(e){e=t.$handleEvent(e),t.onClick(o)}}},[t._v("\n\t\t"+t._s(e)+"\n\t")])}))},f=[],m={name:"segmented-control",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:this.current}},watch:{current:function(t){t!==this.currentIndex&&(this.currentIndex=t)}},computed:{wrapStyle:function(){var t="";switch(this.styleType){case"text":t="border:0;";break;default:t="border-color: ".concat(this.activeColor);break}return t},itemStyle:function(){var t="";switch(this.styleType){case"text":t="color:#000;border-left:0;";break;default:t="color:".concat(this.activeColor,";border-color:").concat(this.activeColor,";");break}return t},activeStyle:function(){var t="";switch(this.styleType){case"text":t="color:".concat(this.activeColor,";border-left:0;border-bottom-style:solid;");break;default:t="color:#fff;border-color:".concat(this.activeColor,";background-color:").concat(this.activeColor);break}return t}},methods:{onClick:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",t))}}},b=m,h=(n("f4e3"),Object(c["a"])(b,p,f,!1,null,"254a230d",null));h.options.__file="uni-segmented-control.vue";var v,g=h.exports,x=n("d173"),w=n.n(x),y={data:function(){return{orderId:"",inputPhoneNumber:"",productionId:"",productionPic:100,userInfo:{},topUrl:"../../static/home/banner_02.png",priceItems:[],current:0,activeColor:"#4cd964",styleType:"button",productNumber:1,totalAmount:100,name:"京东购物卡",text:""}},onLoad:function(t){v=this;var e=t.productid;this.getproductDetails(e),uni.getStorage({key:"userInfo",success:function(t){v.userInfo=t.data,console.log("get usreInfo =="+JSON.stringify(v.userInfo))}})},components:{uniSegmentedControl:g,uniNumberBox:d},methods:{KeyInput:function(t){v.inputPhoneNumber=t.detail.value},getproductDetails:function(t){uni.showNavigationBarLoading();var e=w.a.getRequestUrl("getProductDetails");console.log(e),w.a.httpRequest("POST",e,{productId:t},function(t){uni.hideNavigationBarLoading(),uni.stopPullDownRefresh();var e=t.resData[0];console.log(e),v.productionPic=e.currentpeice,v.productionId=e.productid;var n=e.productimgpath.split("/"),o=n.pop();v.topUrl="../../static/home/"+o,v.text=e.productcontent,v.name=e.productname,v.priceItems=e.price.split(","),v.totalAmount=(v.productionPic*parseFloat(v.productNumber)).toFixed(2)})},escape2Html:function(t){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(t,n){return e[n]}).replace("<section","<div").replace("<img",'<img style="max-width:100%;height:auto" ')},onClickItem:function(t){this.current!==t&&(this.current=t),"0"==this.current?this.productionPic=parseFloat(v.priceItems[0]).toFixed(2):"1"==this.current?this.productionPic=parseFloat(v.priceItems[1]).toFixed(2):"2"==this.current?this.productionPic=parseFloat(v.priceItems[2]).toFixed(2):"3"==this.current&&(this.productionPic=parseFloat(v.priceItems[3]).toFixed(2)),this.totalAmount=(this.productionPic*parseFloat(this.productNumber)).toFixed(2)},onNumberChange:function(t){this.productNumber=t,this.totalAmount=this.productionPic*parseFloat(this.productNumber)},toBuyBtn:function(){v.createOrder()},createOrder:function(){if(v.userInfo)if(v.inputPhoneNumber){var t=w.a.getRequestUrl("createOrder"),e=Number(v.productionPic),n=[{product_id:v.productionId,image:v.topUrl,title:v.name,price:e,quantity:v.productNumber}],o={userid:v.userInfo.xinid,phone:v.inputPhoneNumber,total:v.totalAmount,products:n};w.a.httpRequest("POST",t,o,function(t){console.log(t),v.orderId=t.resData.orderid,v.updataOrder(v.orderId)})}else uni.showModal({title:"提示",content:"请在顶部输入框中，输入要购买商品的手机号",showCancel:!1,confirmText:"确定"});else uni.showToast({title:"还没有获取用户信息",duration:2e3})},toPayOrder:function(t){var e="c94ac88f-4671-3976-b60a-09064f1811e8",n=t.transactionid,o=Number(t.total)/500,i="userid:"+v.userInfo.xinid+",orderid:"+t.orderid,r="1a240817-05f3-46f6-abcf-56d12fc8c32d";r=r.toString(),e=e.toString(),o=o.toString(),n=n.toString(),i=i.toString();var a="https://mixin.one/pay?recipient="+r+"&asset="+e+"&amount="+o+"&trace="+n+"&memo="+i;a=a.toString(),console.log("payUrl ="+a),w.a.toUrl(a)},updataOrder:function(t){if(t){var e=w.a.getRequestUrl("updataOrder"),n=w.a.guid(),o=v.userInfo.xinid,i={orderId:t,paymentaccount:o,transactionid:n,orderType:"1"};w.a.httpRequest("POST",e,i,function(t){console.log(t),v.toPayOrder(t.resData)})}else uni.showToast({title:"还没有订单信息",duration:2e3})},getUserOrderList:function(t){if(t){var e=w.a.getRequestUrl("getUserOrderList"),n={userid:t};w.a.httpRequest("POST",e,n,function(t){console.log(t)})}else uni.showToast({title:"还没有获取到用户信息",duration:2e3})},mixinToken:function(t){var e="api.mixin.one/oauth/token",n={client_id:"b829dadb-2214-4c8b-b560-26b42fe21029",code:t};uni.request({url:e,data:n,success:function(t){console.log("token sucess =="+t.Data),uni.showToast({title:t.data,duration:2e3})},fail:function(t){uni.showToast({title:"获取token请求失败 =="+t.header,duration:2e3})}})},goback:function(){uni.reLaunch({url:"../tabBar/home/home"})}}},k=y,I=(n("a5b1"),Object(c["a"])(k,o,i,!1,null,"43545439",null));I.options.__file="productDetails.vue";e["default"]=I.exports},"46db":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n.uni-numbox[data-v-34c56738]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;height:%?70?%\n}\n.uni-numbox-minus[data-v-34c56738],.uni-numbox-plus[data-v-34c56738]{margin:0;background-color:#f9f9f9;width:%?80?%;height:100%;line-height:%?70?%;text-align:center;color:#555\n}\n.uni-numbox-minus[data-v-34c56738]{border:%?2?% solid #ccc;border-right:none;border-top-left-radius:%?6?%;border-bottom-left-radius:%?6?%\n}\n.uni-numbox-plus[data-v-34c56738]{border:%?2?% solid #ccc;border-left:none;border-top-right-radius:%?6?%;border-bottom-right-radius:%?6?%\n}\n.uni-numbox-value[data-v-34c56738]{border:%?2?% solid #ccc;background-color:#fff;width:%?80?%;height:100%;text-align:center\n}\n.uni-numbox-disabled[data-v-34c56738]{color:silver\n}",""])},"6abb":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n.segmented-control[data-v-254a230d]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:75%;font-size:%?28?%;border-radius:%?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;overflow:hidden\n}\n.segmented-control.button[data-v-254a230d]{border:%?2?% solid\n}\n.segmented-control.text[data-v-254a230d]{border:0;border-radius:%?0?%\n}\n.segmented-control-item[data-v-254a230d]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center;line-height:%?60?%;-webkit-box-sizing:border-box;box-sizing:border-box\n}\n.segmented-control-item.button[data-v-254a230d]{border-left:%?1?% solid\n}\n.segmented-control-item.text[data-v-254a230d]{border-left:0\n}\n.segmented-control-item[data-v-254a230d]:first-child{border-left-width:0\n}",""])},"6c7c":function(t,e,n){var o=n("6abb");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("6cff49dc",o,!0,{sourceMap:!1,shadowMode:!1})},"711b":function(t,e,n){var o=n("37c3");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("a2daf060",o,!0,{sourceMap:!1,shadowMode:!1})},a5b1:function(t,e,n){"use strict";var o=n("711b"),i=n.n(o);i.a},d173:function(t,e){function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e,n,o){uni.showLoading({title:"加载中"});var i=new XMLHttpRequest;"get"==t?r({url:e,type:"get",dataType:"jsonp",success:function(t){console.log(t)},error:function(t){console.log(t)}}):(i.open(t,e),i.setRequestHeader("Content-type","application/json;charset=utf-8"),n?(console.log("JSON == "+JSON.stringify(n)),i.send(JSON.stringify(n))):i.send()),i.onreadystatechange=function(){if(uni.hideLoading(),4==i.readyState&&200==i.status){var t=JSON.parse(i.response);o(t)}}}function i(t){var e="https://cardmallserver.applinzi.com/cardMallServer/";return"getProductList"==t?e+"getProductList.do":"register"==t?e+"register.do":"getProductDetails"==t?e+"getProductDetails.do":"createOrder"==t?e+"createOrder.do":"updataOrder"==t?e+"updataOrder.do":"getUserOrderList"==t?e+"getUserOrderList.do":"请传入有效的参数"}function r(t){var e,o,i,r,a,s;function u(t){return t.replace(/^\s+|\s+$/g,"")}t=t||{},o=t.type||"GET",o=u(o).toUpperCase(),i=t.url,i=u(i),r=t.async||!0,a=t.dataType||"HTML",a=u(a).toUpperCase(),s=t.data||{};var c=function(){if("object"==n(s)){var t="";for(var e in s)t+=e+"="+s[e]+"&";s=t.substr(0,t.length-1)}"GET"!=o&&"JSONP"!=a||(-1==i.lastIndexOf("?")?i+="?"+s:i+="&"+s)};if(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"JSONP"==a){"function"==typeof t.beforeSend&&t.beforeSend(e);var l=("jsonp_"+Math.random()).replace(".",""),d=document.getElementsByTagName("head")[0];s.callback=l;var p=document.createElement("script");return p.type="text/javascript",p.onerror=function(){console.log("failed"),t.error&&t.error("failed")},d.appendChild(p),window[l]=function(e){d.removeChild(p),window[l]=null,t.success&&t.success(e)},c(),void(p.src=i)}c(),e.open(o,i,r),e.setRequestHeader("Content-type","application/json;charset=utf-8"),"function"==typeof t.beforeSend&&t.beforeSend(e),e.send(s),e.onreadystatechange=function(){if(200!=e.status)return console.log(e.status+"failed"),void(t.error&&t.error(e.status+"failed"));if(4==e.readyState&&200==e.status){if("JSON"==a)try{res=JSON.parse(e.responseText)}catch(n){console.log("json格式错误"),t.error("json格式错误")}else res="XML"==a?e.responseXML:e.responseText;t.success&&t.success(res)}}}function a(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null}function s(t){console.log("url =="+t),window.location.href=t}function u(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function c(){return u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u()}t.exports={httpRequest:o,getRequestUrl:i,ajaxRequest:r,getUrlKey:a,toUrl:s,guid:c}},ec61:function(t,e,n){var o=n("46db");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("77280840",o,!0,{sourceMap:!1,shadowMode:!1})},f4e3:function(t,e,n){"use strict";var o=n("6c7c"),i=n.n(o);i.a},fe1a:function(t,e,n){"use strict";var o=n("ec61"),i=n.n(o);i.a}}]);